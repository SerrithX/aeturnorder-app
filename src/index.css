@import "tailwindcss";

/* Global fantasy font */
html, body, #root { 
  font-family: "Cinzel", serif; 
}

/* Disable page-level pull-to-refresh / bounce */
@layer base {
  html, body {
    overscroll-behavior-y: none;
  }
}

/* Card shuffle jitter animation */
@layer utilities {
  /* --- Shuffle FX: jitter (0–45%) + blackout fade 45–55% + clean fade-in 55–100% --- */

  /* Micro jitter that stops before the fade-in begins */
  @keyframes card-jitter {
    0%   { transform: translate3d(0,0,0) rotate(0deg); }
    8%   { transform: translate3d(-1px, 0.6px, 0) rotate(-0.3deg); }
    16%  { transform: translate3d(1px, -0.8px, 0) rotate(0.4deg); }
    24%  { transform: translate3d(-0.8px, 1px, 0) rotate(-0.5deg); }
    32%  { transform: translate3d(1.2px, -0.4px, 0) rotate(0.3deg); }
    40%  { transform: translate3d(-0.6px, 0.4px, 0) rotate(-0.2deg); }
    45%  { transform: translate3d(0,0,0) rotate(0deg); }
    100% { transform: translate3d(0,0,0) rotate(0deg); } /* no jitter after 45% */
  }

  /* Crossfade: visible → blackout (45–55%) → visible */
  @keyframes stack-crossfade {
    0%   { opacity: 1; }
    45%  { opacity: 0; }   /* fully black by 45% */
    55%  { opacity: 0; }   /* hold blackout through 55% */
    100% { opacity: 1; }   /* clean fade-in after 55% */
  }

  /* Single class that runs both; duration comes from JS via --shuffle-ms */
  .animate-jitter-and-fade {
    animation:
      card-jitter   var(--shuffle-ms, 1200ms) ease-in-out both,
      stack-crossfade var(--shuffle-ms, 1200ms) ease-in-out both;
    will-change: transform, opacity;
  }

  /* Respect reduced-motion: keep the blackout timing but remove jitter */
  @media (prefers-reduced-motion: reduce) {
    .animate-jitter-and-fade {
      animation:
        stack-crossfade var(--shuffle-ms, 1200ms) ease-in-out both;
    }
  }

  /* (Optional) slightly softer ease for fade-in only */
  @supports (animation-timeline: auto) {
    /* Not widely needed—left as a hook if you want to split easings later */
  }

}
